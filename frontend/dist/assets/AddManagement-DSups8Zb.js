import{r as a,j as s,b as i,B as c}from"./index-HjvooKpM.js";import{C as $}from"./Toast-DwbOLzDo.js";import{M as B}from"./Modal-CMuDvb4e.js";import{A as C}from"./AddUserTable-wQaYFqIk.js";import"./ThemeProvider-B1N1Idvp.js";import"./useTimeout-1ZLlq2F-.js";import"./TransitionWrapper-CBvFqiYv.js";import"./useEventCallback-Dv_9Mjij.js";import"./Button-Bo3fKrTY.js";import"./Button-ClrWuGp5.js";import"./hasClass-CVqomwya.js";import"./Table-C5MtgNzK.js";import"./TablePlaceholder-DrsknVAL.js";import"./hook-BUPs70WA.js";import"./Placeholder-Bn63vBcU.js";import"./Col-CN8rXc6_.js";function N(){document.title="CPMS | Management Users";const[h,S]=a.useState([]),[M,w]=a.useState(!0),[x,o]=a.useState(!1),[D,d]=a.useState(""),[u,n]=a.useState(!1),[r,p]=a.useState(null),m=async()=>{try{const e=await i.get(`${c}/admin/management-users`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});e.data?S(e.data.managementUsers):console.warn("Response does not contain ManagementUsers:",e.data)}catch(e){console.error("Error fetching user details",e)}finally{w(!1)}};a.useEffect(()=>{m()},[]);const[y,A]=a.useState(!1),[l,U]=a.useState({first_name:"",email:"",number:"",password:""}),b=e=>U({...l,[e.target.name]:e.target.value}),T=e=>{p(e),n(!0)},g=async e=>{try{const t=await i.post(`${c}/admin/management-delete-user`,{email:r},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});n(!1),t.data&&(d(t.data.msg),o(!0),m())}catch(t){console.log("Management => confirmDelete ==> ",t)}},f=()=>{n(!1),p(null)},j=async e=>{e.preventDefault();try{const t=await i.post(`${c}/admin/management-add-user`,l,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});t.data&&(d(t.data.msg),o(!0),m())}catch(t){console.log("handleSubmit => Mangement.jsx ==> ",t)}};return s.jsxs(s.Fragment,{children:[s.jsx($,{show:x,onClose:()=>o(!1),message:D,delay:3e3,position:"bottom-end"}),s.jsx(C,{users:h,loading:M,handleDeleteUser:T,formOpen:y,setFormOpen:A,data:l,handleDataChange:b,handleSubmit:j,showModal:u,closeModal:f,confirmDelete:g,userToDelete:r,userToAdd:"Management Admin",handleApproveStudent:null}),s.jsx(B,{show:u,close:f,header:"Confirmation",body:`Do you want to delete ${r}?`,btn:"Delete",confirmAction:g})]})}export{N as default};
