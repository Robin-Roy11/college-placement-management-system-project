import{r as t,j as o,b as m,B as c}from"./index-HjvooKpM.js";import{C as O}from"./Toast-DwbOLzDo.js";import{M as $}from"./Modal-CMuDvb4e.js";import{A as B}from"./AddUserTable-wQaYFqIk.js";import"./ThemeProvider-B1N1Idvp.js";import"./useTimeout-1ZLlq2F-.js";import"./TransitionWrapper-CBvFqiYv.js";import"./useEventCallback-Dv_9Mjij.js";import"./Button-Bo3fKrTY.js";import"./Button-ClrWuGp5.js";import"./hasClass-CVqomwya.js";import"./Table-C5MtgNzK.js";import"./TablePlaceholder-DrsknVAL.js";import"./hook-BUPs70WA.js";import"./Placeholder-Bn63vBcU.js";import"./Col-CN8rXc6_.js";function N(){document.title="CPMS | TPO Users";const[h,S]=t.useState([]),[T,w]=t.useState(!0),[A,a]=t.useState(!1),[x,d]=t.useState(""),[p,r]=t.useState(!1),[n,u]=t.useState(null),l=async()=>{try{const e=await m.get(`${c}/management/tpo-users`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});e.data?S(e.data.tpoUsers):console.warn("Response does not contain tpoUsers:",e.data)}catch(e){console.error("Error fetching user details",e)}finally{w(!1)}};t.useEffect(()=>{l()},[]);const[D,y]=t.useState(!1),[i,U]=t.useState({first_name:"",email:"",number:"",password:""}),M=e=>U({...i,[e.target.name]:e.target.value}),b=e=>{u(e),r(!0)},f=async()=>{try{const e=await m.post(`${c}/management/deletetpo`,{email:n},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});r(!1),e.data&&(d(e.data.msg),a(!0),l())}catch(e){console.log("AddTPO => confirmDelete ==> ",e)}},g=()=>{r(!1),u(null)},j=async e=>{e.preventDefault();try{const s=await m.post(`${c}/management/addtpo`,i,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});s.data&&(d(s.data.msg),a(!0),l())}catch(s){console.log("handleSubmit => AddTPO.jsx ==> ",s)}};return o.jsxs(o.Fragment,{children:[o.jsx(O,{show:A,onClose:()=>a(!1),message:x,delay:3e3,position:"top-center"}),o.jsx(B,{users:h,loading:T,handleDeleteUser:b,formOpen:D,setFormOpen:y,data:i,handleDataChange:M,handleSubmit:j,showModal:p,closeModal:g,confirmDelete:f,userToDelete:n,userToAdd:"TPO Admin"}),o.jsx($,{show:p,close:g,header:"Confirmation",body:`Do you want to delete ${n}?`,btn:"Delete",confirmAction:f})]})}export{N as default};
